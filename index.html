<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PHS R Templates • phstemplates</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="PHS R Templates">
<meta name="description" content="Templates for Public Health Scotland.">
<meta property="og:description" content="Templates for Public Health Scotland.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">phstemplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Public-Health-Scotland/phstemplates/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="phstemplates">phstemplates<a class="anchor" aria-label="anchor" href="#phstemplates"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="contents">Contents<a class="anchor" aria-label="anchor" href="#contents"></a>
</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#making-a-new-phs-project">Making a new PHS project</a></li>
<li><a href="#making-a-new-phs-shiny-app">Making a new PHS shiny app</a></li>
<li><a href="#adding-a-phs-gitignore-file-to-an-existing-directory">Adding a new PHS gitignore</a></li>
<li><a href="#rmarkdown-templates">RMarkdown Templates</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>If you are working inside the PHS network, with R set up to install packages from the internal package manager repository (for example, if you are using R from Posit Workbench), you can install the package by running</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"phstemplates"</span><span class="op">)</span></span></code></pre></div>
<p>Otherwise, install the package from Github by running the following code in R:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Public-Health-Scotland/phstemplates"</span>, ref <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></code></pre></div>
<p>If you encounter any issues with the automatic installation of package dependencies using this method, you may need to install these manually prior to running the code to install phstemplates. In this case, it should tell you which packages you need. For example, if you need <a href="https://davidgohel.github.io/flextable" class="external-link">flextable</a> and <a href="https://davidgohel.github.io/officer" class="external-link">officer</a>, install these first:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"flextable"</span>, <span class="st">"officer"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="making-a-new-phs-project">Making a new PHS project<a class="anchor" aria-label="anchor" href="#making-a-new-phs-project"></a>
</h2>
<p>To use this project template, install the package by following the instructions above. After doing this you will then be able to create new R projects with the recommended PHS structure within RStudio by clicking</p>
<p><strong>File -&gt; New Project… -&gt; New Directory</strong> and selecting <strong>PHS R Project Template</strong></p>
<p>Name the project and select a location for the project folder. The original author can also be input - this will automatically add the name to the top section of default scripts within the project. You can then edit the files and folders as appropriate, e.g. rename the R script files or create new sub-folders. The default files and folders contained within the project are described in subsequent sections of this README.</p>
<p>This template aims to instill best practice within PHS and therefore git has been initialised for version control. However, if you are not using this then you can delete the .gitignore file. More information about <a href="https://github.com/Public-Health-Scotland/resources/blob/master/version-control.md" class="external-link">version control</a>.</p>
<p>If you are using git for version control then please be aware that the .gitignore contains the minimum recommended file types and folders to stop data being tracked and pushed to GitHub. Further guidance on using git and GitHub securely can be found <a href="https://github.com/Public-Health-Scotland/GitHub-guidance" class="external-link">here</a>.</p>
<p>This template is also intended to be flexible, so you may not require every file or folder. For example, if you have written long or multiple functions then we would recommend saving these in the dedicated <code>functions.R</code> file, which can then be sourced within the main script(s). Additionally, if you are using many packages then these could be saved within the <code>packages.R</code> file and sourced similarly. However, decisions on whether these files are required and the exact structure of the folders and scripts should be left up to the analyst’s discretion. For more guidance on structuring and writing R scripts follow the organisation’s <a href="https://github.com/Public-Health-Scotland/R-Resources/blob/master/PHS%20R%20style%20guide.md" class="external-link">R Style Guide</a>.</p>
<div class="section level3">
<h3 id="directories">Directories<a class="anchor" aria-label="anchor" href="#directories"></a>
</h3>
<ul>
<li>
<code>code</code> - R scripts required for project
<ul>
<li>
<code>code.R</code> - example structure for main R script(s)</li>
<li>
<code>functions.R</code> - functions sourced and used in main script(s)</li>
<li>
<code>packages.R</code> - list of packages sourced and used in main script(s)</li>
</ul>
</li>
<li>
<code>data</code> - data required for project
<ul>
<li><code>basefiles</code></li>
<li><code>output</code></li>
<li><code>temporary</code></li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="files">Files<a class="anchor" aria-label="anchor" href="#files"></a>
</h3>
<ul>
<li>
<code>.gitignore</code> - tells git what files and folders <em>not</em> to track or upload to GitHub</li>
<li>
<code>README.md</code> - this page</li>
<li>
<code>.Rprofile</code> - R profile settings</li>
<li>
<code>r-project.Proj</code> - R project</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="making-a-new-phs-shiny-app">Making a new PHS shiny app<a class="anchor" aria-label="anchor" href="#making-a-new-phs-shiny-app"></a>
</h2>
<p>After installation you will then be able to create new R shiny apps with PHS styling within RStudio by clicking</p>
<p><strong>File -&gt; New Project… -&gt; New Directory</strong> and selecting <strong>PHS R Shiny App</strong></p>
<p>Name the app and select a location for the project folder. The original author can also be input - this will automatically add the name to the top section of default scripts within the project. You can then edit the files and folders as appropriate, e.g. rename the R script files or create new sub-folders. The default files and folders contained within the project are described in the README which is created inside the new shiny app template.</p>
</div>
<div class="section level2">
<h2 id="adding-a-phs-gitignore-file-to-an-existing-directory">Adding a PHS gitignore file to an existing directory<a class="anchor" aria-label="anchor" href="#adding-a-phs-gitignore-file-to-an-existing-directory"></a>
</h2>
<p>If you want to add a PHS style <code>.gitignore</code> to a given directory, you can do this in R Studio by selecting <code>Addins</code> on the top banner then scrolling down to the PHSTEMPLATES section and choosing <strong>Add PHS .gitignore file</strong>. This will allow you to choose the location of your new <code>.gitignore</code> file. You can also do this directly from the R console using the command <code><a href="reference/add_gitignore.html">phstemplates::add_gitignore()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="rmarkdown-templates">RMarkdown Templates<a class="anchor" aria-label="anchor" href="#rmarkdown-templates"></a>
</h2>
<p>This package currently provides RMarkdown templates for:</p>
<ul>
<li>PHS official statistics report and summary documents</li>
<li>PHS accredited official statistics report and summary documents</li>
<li>PHS official statistics in development report and summary documents</li>
<li>PHS management information report, summary and one-page documents</li>
</ul>
<p>Please note that these templates require pandoc v2 (or RStudio v1.2 which comes with the required version of pandoc). You can check the version of pandoc that you have with <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/pandoc_available.html" class="external-link">rmarkdown::pandoc_version()</a></code>.</p>
<p>You can access these templates in RStudio by clicking <strong>File -&gt; New File -&gt; R Markdown -&gt; From Template</strong>.</p>
<p>Once the template has been loaded, the document can be produced by clicking the <strong>Knit</strong> button. Alternatively, you can use the <code>render()</code> function to produce the document. This may be preferable if you want to automate the production of several different reports. This is some example code for doing this with the official statistics template.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span></span>
<span>  input <span class="op">=</span> <span class="st">"my_report.Rmd"</span>,</span>
<span>  output_format <span class="op">=</span> <span class="fu">phstemplates</span><span class="fu">::</span><span class="fu"><a href="reference/phs_report_docx.html">phs_report_docx</a></span><span class="op">(</span></span>
<span>    reference_docx <span class="op">=</span> <span class="st">"phs-offstats-report.docx"</span>,</span>
<span>    cover_page <span class="op">=</span> <span class="st">"phs-offstats-cover.docx"</span>,</span>
<span>    cover_title <span class="op">=</span> <span class="st">"My Report Title"</span>,</span>
<span>    cover_subtitle <span class="op">=</span> <span class="st">"My Report Subtitle"</span>,</span>
<span>    cover_date <span class="op">=</span> <span class="st">"01 01 2024"</span>,</span>
<span>    toc_depth <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output_file <span class="op">=</span> <span class="st">"my_report.docx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="adding-a-new-template">Adding a new template<a class="anchor" aria-label="anchor" href="#adding-a-new-template"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Clone phstemplates and load it up in RStudio</li>
<li>Create your own Git branch and switch to that branch</li>
<li>In R, type <code>usethis::use_rmarkdown_template("my-template")</code> where you replace <code>my-template</code> with the name you want to give your template. This is actually just the name it gives to the folder that stores your template so the name should not have spaces but can contain dashes or underscores. The name should also not be too long as this may cause issues when building the package. This will create a basic structure for your template within the directory <code>inst\rmarkdown\templates\my-template</code>
</li>
<li>Open up <code>template.yaml</code> in the folder just created for your template. Update the name and description as appropriate for your template.</li>
<li>Go to the ‘skeleton’ folder (<code>inst\rmarkdown\templates\my-template\skeleton</code>) and delete <code>skeleton.Rmd</code>
</li>
<li>Copy and paste your RMarkdown template file and any associated files required for the template into the ‘skeleton’ folder (e.g. you may have an MS Word reference document to set up styles)</li>
<li>Rename your RMarkdown template file to <code>skeleton.Rmd</code>
</li>
<li>Run <code>devtools::check()</code> and make sure the package passes all the checks</li>
<li>Run <code>devtools::install()</code>, then restart RStudio and check that your templates can be loaded from the RStudio menus</li>
<li>Push to Github</li>
<li>Create a pull request and ask for a review from an appropriate staff member so the changes can be merged</li>
</ol>
</div>
<div class="section level3">
<h3 id="updating-an-existing-template">Updating an existing template<a class="anchor" aria-label="anchor" href="#updating-an-existing-template"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Clone phstemplates and load it up in RStudio</li>
<li>Create your own Git branch and switch to that branch</li>
<li>Rename your updated template file to <code>skeleton.Rmd</code> and place it (and any associated files if they have also been updated) inside the ‘skeleton’ folder of your template (<code>inst\rmarkdown\templates\your-template\skeleton</code>)</li>
<li>Run <code>devtools::check()</code> and make sure the package passes all the checks</li>
<li>Run <code>devtools::install()</code>, then restart RStudio and check that your templates can be loaded from the RStudio menus</li>
<li>Push to Github</li>
<li>Create a pull request and ask for a review from an appropriate staff member so the changes can be merged</li>
</ol>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Public-Health-Scotland/phstemplates/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Public-Health-Scotland/phstemplates/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing phstemplates</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Alan Yeung <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5226-3695" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Anna Price <br><small class="roles"> Author </small>  </li>
<li>Rosalyn Pearson <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Public-Health-Scotland/phstemplates/tags" class="external-link"><img src="https://img.shields.io/github/v/tag/Public-Health-Scotland/phstemplates" alt="GitHub tag (latest by date)"></a></li>
<li><a href="https://github.com/Public-Health-Scotland/phstemplates/actions" class="external-link"><img src="https://github.com/Public-Health-Scotland/phstemplates/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alan Yeung, Anna Price, Rosalyn Pearson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
